<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Applet FTA</title>

  <!-- PapaParse para leer CSV -->
  <script src="https://cdn.jsdelivr.net/npm/papaparse@5.3.2/papaparse.min.js"></script>
  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- React 18 -->
  <script crossorigin src="https://unpkg.com/react@18/umd/react.development.js"></script>
  <script crossorigin src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
  <!-- Babel para JSX -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
</head>

<body class="bg-white text-gray-800">
  <div id="root"></div>

  <script type="text/babel">
    const { useState, useMemo, useEffect } = React;

    // =========================================================
    // CAT√ÅLOGO DE FICHAS (ejemplo: Cacao y Ma√≠z)
    // =========================================================
    const CATALOGO = [
      {
        id: "cacao",
        nombre: "Cacao",
        tipo: "Perenne",
        fases: ["Vegetativa", "Productiva"],
        csv: {
          Vegetativa: "https://raw.githubusercontent.com/vvalencia1306-code/applet-FTA/main/vegetativa.csv",
          Productiva: "https://raw.githubusercontent.com/vvalencia1306-code/applet-FTA/main/productiva.csv",
        },
        imagen: "assets/Dise√±oFTA.png",
      },
      {
        id: "maiz-eje-cafetero",
        nombre: "Ma√≠z ¬∑ Eje Cafetero",
        tipo: "Ciclo corto",
        fases: ["Vegetativa"], 
        csv: {
          Vegetativa: "https://raw.githubusercontent.com/vvalencia1306-code/applet-FTA/main/maiz_eje_cafetero.csv",
        },
        imagen: "assets/Dise√±oFTA.png",
      },
    ];

    // =========================================================
    // INTRO (cambio de ubicaci√≥n solicitado)
    // =========================================================
    function Intro({ onStart }) {
      return (
        <div className="max-w-5xl mx-auto p-6">
          <h1 className="text-3xl font-semibold mb-10 text-center">
            ¬øQU√â ES UNA FICHA T√âCNICA AGROCLIM√ÅTICA (FTA)?
          </h1>

          {/* P√°rrafo inicial */}
          <p className="text-gray-700 mb-10">
            Una FTA es un instrumento <b>t√©cnico</b> que organiza y sintetiza los principales <b>riesgos agroclim√°ticos</b> que afectan un sistema productivo agr√≠cola.
            Para ello, se identifican los <b>elementos expuestos</b> del cultivo (ra√≠ces, tallo, floraci√≥n, pr√°cticas de manejo) y los relacionan con
            <b> amenazas clim√°ticas</b> como <i>d√©ficit y exceso h√≠drico</i> y <i>temperaturas extremas</i>. Este instrumento permite la toma de decisiones oportunas y <b>adaptativas</b>
            por parte de los actores del sistema productivo con el fin de fortalecer la planificaci√≥n agr√≠cola.
          </p>

          {/* Cuadros primero */}
          <section className="grid md:grid-cols-2 gap-6 mb-10">
            <div className="rounded-2xl border p-5">
              <h2 className="font-semibold mb-2">Componentes de la FTA</h2>
              <ul className="list-disc ml-6 text-gray-700 space-y-1">
                <li>
                  Filas ={" "}
                  <span className="relative group cursor-help inline-block">
                    <b>elementos expuestos</b>
                    <span className="absolute bottom-full left-1/2 -translate-x-1/2 mb-2 hidden group-hover:block w-64 p-2 bg-gray-800 text-white text-xs rounded-lg shadow-lg">
                      Componentes del cultivo susceptibles a los riesgos clim√°ticos, como ra√≠ces, tallo, hojas o pr√°cticas agr√≠colas.
                    </span>
                  </span>{" "}
                  (fases fenol√≥gicas o pr√°cticas agr√≠colas)
                </li>
                <li>
                  Columnas ={" "}
                  <span className="relative group cursor-help inline-block">
                    <b>ventana de temporalidad</b>
                    <span className="absolute bottom-full left-1/2 -translate-x-1/2 mb-2 hidden group-hover:block w-64 p-2 bg-gray-800 text-white text-xs rounded-lg shadow-lg">
                      Intervalos de tiempo dentro del ciclo productivo en los que se presentan riesgos clim√°ticos.
                    </span>
                  </span>{" "}
                  y{" "}
                  <span className="relative group cursor-help inline-block">
                    <b>amenazas clim√°ticas</b>
                    <span className="absolute bottom-full left-1/2 -translate-x-1/2 mb-2 hidden group-hover:block w-64 p-2 bg-gray-800 text-white text-xs rounded-lg shadow-lg">
                      Condiciones como d√©ficit h√≠drico, exceso h√≠drico y temperaturas extremas que afectan al cultivo.
                    </span>
                  </span>
                </li>
              </ul>
            </div>

            <div className="rounded-2xl border p-5">
              <h2 className="font-semibold mb-2">P√∫blico objetivo</h2>
              <p className="text-gray-700">
                Actores del territorio que tienen conocimiento directo, t√©cnico o pr√°ctico sobre los sistemas productivos priorizados.
                Su prop√≥sito es validar, complementar o ajustar las FTA preliminares y facilitar su apropiaci√≥n local.
              </p>
            </div>
          </section>

          {/* Recuadro amarillo despu√©s */}
          <div className="p-4 rounded-xl bg-amber-50 text-amber-900 mb-10">
            <b>Importante:</b> Los campos <i>Mes inicio</i> y <i>Mes fin</i> <b>no son meses de calendario</b>. ‚ÄúMes 1‚Äù es el primer mes del evento dentro del sistema productivo.
            Por ejemplo, puede coincidir con octubre si all√≠ inicia la preparaci√≥n del terreno.
          </div>

          {/* P√°rrafo largo despu√©s */}
          <p className="text-gray-700 mb-12">
            Esta forma relativa de representar la temporalidad permite adaptar la ficha a ciclos productivos variables, evitando rigideces en fechas hist√≥ricas de siembra o manejo.
            As√≠, la FTA se convierte en una herramienta flexible y √∫til frente a la variabilidad y el cambio clim√°tico, facilitando su contextualizaci√≥n territorial.
          </p>

          {/* Imagen */}
          <div className="mb-12 flex justify-center">
            <img
              src="assets/Dise√±oFTA.png"
              alt="Dise√±o de la FTA"
              className="rounded-xl shadow-lg max-w-3xl w-full"
            />
          </div>

          {/* Bot√≥n */}
          <div className="flex justify-center">
            <button
              onClick={onStart}
              className="px-5 py-3 rounded-xl bg-emerald-600 text-white font-medium hover:bg-emerald-700"
            >
              üëâ Explorar fichas t√©cnicas
            </button>
          </div>
        </div>
      );
    }

    // =========================================================
    // APP SIMPLE (Intro + placeholder)
    // =========================================================
    function App() {
      const [paso, setPaso] = useState("intro");
      if (paso === "intro") return <Intro onStart={() => setPaso("selector")} />;
      return <div className="p-6 text-center">Aqu√≠ ir√≠a el selector de fichas‚Ä¶</div>;
    }

    ReactDOM.createRoot(document.getElementById("root")).render(<App />);
  </script>
</body>
</html>
